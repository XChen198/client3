import{E as W}from"./DG4vFwbg.js";import{i as X,g as Z,b as ee,E as te}from"./B3en76v2.js";import{E as le}from"./DjFJZaCT.js";import{_ as T}from"./BNo7q0CF.js";import{E as oe}from"./DCPSvxVJ.js";import{E as se,a as ae,b as ne}from"./azSKnpvj.js";import{E as ie,a as re}from"./z0lRkXp0.js";import{E as ue,_ as de}from"./Bf1psxly.js";import{E as ce}from"./CYz9hpGZ.js";import"./BO-BUzP0.js";import"./RrxjGB37.js";import{E as N}from"./Dtsb2UZl.js";import{f as _e,g as pe,r as _,h as me,c as d,b as t,w as l,o as i,a as e,i as m,d as c,k as x,j as U,N as j,O as A,t as h,a2 as he,p as ve,e as ge}from"./CsIamsOv.js";import{u as fe}from"./BTDj4EH4.js";import{g as we}from"./mO1Piuff.js";import{l as xe}from"./Bd0GBrjl.js";import{_ as ye}from"./DlAUqK2U.js";import"./r5W6hzzQ.js";import"./D-9BgIql.js";const a=y=>(ve("data-v-f321561c"),y=y(),ge(),y),Ee=a(()=>e("h1",null,"NYKnow.com",-1)),be=a(()=>e("span",null,null,-1)),Ce=a(()=>e("span",null,null,-1)),Ve=a(()=>e("span",null," 在此输入帖子的标题，发帖人名称以搜索，分类可以不选 ",-1)),ze={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024",style:{width:"20px","vertical-align":"bottom"}},ke=a(()=>e("path",{fill:"currentColor",d:"M704 192h160v736H160V192h160v64h384zM288 512h448v-64H288zm0 256h448v-64H288zm96-576V96h256v96z"},null,-1)),Me=[ke],Se=a(()=>e("span",null,"最热帖子",-1)),Be={class:"latestPost"},Ie=a(()=>e("span",null,"公告",-1)),He=a(()=>e("p",null,"本站旨在建立一个可用于交流的社区，你可以以游客的方式浏览内容或是创建一个账户来发表帖子，但禁止发布辱骂等敏感词汇，感谢大家的配合",-1)),Le=a(()=>e("p",null,"本站旨在建立一个可用于交流的社区，你可以以游客的方式浏览内容或是创建一个账户来发表帖子，但禁止发布辱骂等敏感词汇，感谢大家的配合",-1)),Pe=a(()=>e("div",{style:{height:"1px"}},null,-1)),Te={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":"",style:{width:"24px"}},Ne=a(()=>e("path",{fill:"currentColor",d:"M192 413.952V896h640V413.952L512 147.328zM139.52 374.4l352-293.312a32 32 0 0 1 40.96 0l352 293.312A32 32 0 0 1 896 398.976V928a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V398.976a32 32 0 0 1 11.52-24.576"},null,-1)),Ue=[Ne],je=a(()=>e("span",{style:{"padding-left":"5px"}}," 首页 ",-1)),Ae=a(()=>e("div",{class:"flex-grow"},null,-1)),De={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":"",style:{width:"24px"}},$e=a(()=>e("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704"},null,-1)),Oe=[$e],Re=a(()=>e("span",{style:{"padding-left":"5px","padding-right":"15px"}},"搜索",-1)),Fe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":"",style:{width:"24px"}},Ke=a(()=>e("path",{fill:"currentColor",d:"M512 512a192 192 0 1 0 0-384 192 192 0 0 0 0 384m0 64a256 256 0 1 1 0-512 256 256 0 0 1 0 512m320 320v-96a96 96 0 0 0-96-96H288a96 96 0 0 0-96 96v96a32 32 0 1 1-64 0v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 1 1-64 0"},null,-1)),Ye=[Ke],qe=a(()=>e("span",{style:{"padding-left":"5px"}},"注册/登录",-1)),Ge={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":"",style:{width:"24px"}},Je=a(()=>e("path",{fill:"currentColor",d:"M512 512a192 192 0 1 0 0-384 192 192 0 0 0 0 384m0 64a256 256 0 1 1 0-512 256 256 0 0 1 0 512m320 320v-96a96 96 0 0 0-96-96H288a96 96 0 0 0-96 96v96a32 32 0 1 1-64 0v-96a160 160 0 0 1 160-160h448a160 160 0 0 1 160 160v96a32 32 0 1 1-64 0"},null,-1)),Qe=[Je],We={style:{"padding-left":"5px"}},Xe={key:0,class:"searchBox"},Ze=a(()=>e("img",{src:de},null,-1)),et=["innerHTML"],tt={style:{float:"right"}},lt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":"",style:{width:"20px","vertical-align":"text-bottom"}},ot=a(()=>e("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352m0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448m0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160"},null,-1)),st=[ot],at={style:{float:"right"}},nt={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024","data-v-ea893728":"",style:{width:"20px","vertical-align":"text-bottom"}},it=a(()=>e("path",{fill:"currentColor",d:"m174.72 855.68 135.296-45.12 23.68 11.84C388.096 849.536 448.576 864 512 864c211.84 0 384-166.784 384-352S723.84 160 512 160 128 326.784 128 512c0 69.12 24.96 139.264 70.848 199.232l22.08 28.8-46.272 115.584zm-45.248 82.56A32 32 0 0 1 89.6 896l58.368-145.92C94.72 680.32 64 596.864 64 512 64 299.904 256 96 512 96s448 203.904 448 416-192 416-448 416a461.056 461.056 0 0 1-206.912-48.384l-175.616 58.56z"},null,-1)),rt=a(()=>e("path",{fill:"currentColor",d:"M512 563.2a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4m192 0a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4m-384 0a51.2 51.2 0 1 1 0-102.4 51.2 51.2 0 0 1 0 102.4"},null,-1)),ut=[it,rt],dt=_e({__name:"index",setup(y){const v=pe(),C=fe(),D=_("1"),g=_(""),f=_(""),b=_(!1),p=_(!1),V=_(1),z=_([]),k=_([]),M=_(0);me(async()=>{E();let n;if(n=await we(),n){const u=await n.json();u.code===0?(p.value=!0,C.setUserInfo(u.data)):(p.value=!1,console.log("Error fetching user info",u.message))}else console.log("Error fetching user info");let s;if(s=await X(),s){const u=await s.json();u.code===0?z.value=u.data:console.log("Error fetching hot posts",u.message)}else console.log("Error fetching hot posts")});const $=async n=>{n==="1"?v.push("/"):n==="2"?b.value=!b.value:n==="3"?S():n==="4-1"?v.push("/account/publish"):n==="4-2"&&B()},S=()=>{v.push("/login")},O=()=>{v.push("/signup")},B=async()=>{let n;if(n=await xe(),n){const s=await n.json();s.code===0?(p.value=!1,N({message:s.message,type:"success"})):N({message:s.message,type:"error"})}else console.log("Error logging out")},R=n=>{V.value=n,E()},E=async()=>{let n;if(n=await Z(V.value,g.value,f.value),n){const s=await n.json();s.code===0?(k.value=s.data.result,M.value=s.data.total):console.log("Error fetching posts",s.message)}else console.log("Error fetching posts")};return(n,s)=>{const u=W,r=ee,I=te,H=le,F=T,L=oe,w=se,K=ae,Y=ne,P=re,q=ue,G=T,J=ce,Q=ie;return i(),d("div",null,[t(Q,null,{default:l(()=>[t(P,{xs:24,sm:24,md:6,lg:6,xl:6},{default:l(()=>[e("aside",null,[Ee,p.value?x("",!0):(i(),m(u,{key:0,plain:"",style:{width:"100%","margin-top":"10px"},size:"large",onClick:S},{default:l(()=>[c("登录")]),_:1})),be,p.value?x("",!0):(i(),m(u,{key:1,plain:"",style:{width:"100%","margin-top":"10px"},size:"large",onClick:O},{default:l(()=>[c("注册")]),_:1})),p.value?(i(),m(u,{key:2,type:"primary",plain:"",style:{width:"100%","margin-top":"10px"},size:"large",onClick:s[0]||(s[0]=o=>U(v).push("/account/publish"))},{default:l(()=>[c("个人中心")]),_:1})):x("",!0),Ce,p.value?(i(),m(u,{key:3,type:"danger",plain:"",style:{width:"100%","margin-top":"10px"},size:"large",onClick:B},{default:l(()=>[c("退出登录")]),_:1})):x("",!0),Ve,e("div",null,[t(I,{modelValue:f.value,"onUpdate:modelValue":s[1]||(s[1]=o=>f.value=o),placeholder:"选择分类",style:{width:"100%"}},{default:l(()=>[t(r,{label:"招聘",value:"招聘"}),t(r,{label:"新闻",value:"新闻"}),t(r,{label:"生活",value:"生活"}),t(r,{label:"科技",value:"科技"}),t(r,{label:"娱乐",value:"娱乐"}),t(r,{label:"社会",value:"社会"}),t(r,{label:"编程",value:"编程"}),t(r,{label:"不选",value:""})]),_:1},8,["modelValue"]),t(H,{modelValue:g.value,"onUpdate:modelValue":s[2]||(s[2]=o=>g.value=o),placeholder:"输入要搜索的关键词",type:"text"},null,8,["modelValue"]),t(u,{type:"primary",style:{width:"100%","margin-top":"10px"},onClick:E},{default:l(()=>[c("搜索")]),_:1})]),(i(),d("svg",ze,Me)),Se,e("div",Be,[e("ul",null,[(i(!0),d(j,null,A(z.value,o=>(i(),d("li",null,[t(F,{to:`/post/${o._id}`,class:"hotPost"},{default:l(()=>[c(h(o.title),1)]),_:2},1032,["to"])]))),256))])]),Ie,e("div",null,[t(L,{shadow:"always"},{default:l(()=>[He]),_:1}),t(L,{shadow:"always"},{default:l(()=>[Le]),_:1})]),Pe]),e("header",null,[t(Y,{"default-active":D.value,class:"el-menu-demo",mode:"horizontal",ellipsis:!1,onSelect:$},{default:l(()=>[t(w,{index:"1"},{default:l(()=>[(i(),d("svg",Te,Ue)),je]),_:1}),Ae,t(w,{index:"2"},{default:l(()=>[(i(),d("svg",De,Oe)),Re]),_:1}),p.value?(i(),m(K,{key:1,index:"4","close-on-click-outside":"true"},{title:l(()=>{var o;return[(i(),d("svg",Ge,Qe)),e("span",We,h((o=U(C).userInfo)==null?void 0:o.username),1)]}),default:l(()=>[t(w,{index:"4-1"},{default:l(()=>[c("个人中心")]),_:1}),t(w,{index:"4-2",style:{color:"#f56c6c"}},{default:l(()=>[c(" 退出登录 ")]),_:1})]),_:1})):(i(),m(w,{key:0,index:"3"},{default:l(()=>[(i(),d("svg",Fe,Ye)),qe]),_:1}))]),_:1},8,["default-active"]),t(he,{name:"el-zoom-in-top"},{default:l(()=>[b.value?(i(),d("div",Xe,[t(H,{modelValue:g.value,"onUpdate:modelValue":s[4]||(s[4]=o=>g.value=o),placeholder:"输入关键词",size:"large"},{prepend:l(()=>[t(I,{modelValue:f.value,"onUpdate:modelValue":s[3]||(s[3]=o=>f.value=o),placeholder:"选择",style:{width:"105px"},size:"large"},{default:l(()=>[t(r,{label:"招聘",value:"招聘"}),t(r,{label:"新闻",value:"新闻"}),t(r,{label:"生活",value:"生活"}),t(r,{label:"科技",value:"科技"}),t(r,{label:"娱乐",value:"娱乐"}),t(r,{label:"社会",value:"社会"}),t(r,{label:"编程",value:"编程"}),t(r,{label:"不选",value:""})]),_:1},8,["modelValue"])]),append:l(()=>[t(u,{type:"primary",style:{width:"70px"},onClick:E},{default:l(()=>[c("搜索")]),_:1})]),_:1},8,["modelValue"])])):x("",!0)]),_:1})])]),_:1}),t(P,{xs:24,sm:24,md:18,lg:18,xl:18},{default:l(()=>[e("main",null,[(i(!0),d(j,null,A(k.value,o=>(i(),m(G,{key:o._id,to:`/post/${o._id}`},{default:l(()=>[e("div",null,[t(q,{size:50,src:o.avatar,style:{"vertical-align":"middle"}},{default:l(()=>[Ze]),_:2},1032,["src"]),e("span",null,h(o.username),1),e("h4",null,h(o.title),1),e("p",{class:"content",innerHTML:o.content,style:{width:"100%","margin-bottom":"5px"}},null,8,et),e("span",null,h(o.createdAt.split("T")[0]),1),e("span",tt,[(i(),d("svg",lt,st)),c(" "+h(o.visitors),1)]),e("span",at,[(i(),d("svg",nt,ut)),c(" "+h(o.comments),1)])])]),_:2},1032,["to"]))),128)),t(J,{background:"",layout:"prev, pager, next",total:M.value,"page-size":10,"pager-count":5,style:{"justify-content":"center"},onCurrentChange:R},null,8,["total"])])]),_:1})]),_:1})])}}}),Bt=ye(dt,[["__scopeId","data-v-f321561c"]]);export{Bt as default};
