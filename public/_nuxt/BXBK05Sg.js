import{E as M}from"./DjFJZaCT.js";import{E as C,a as k}from"./Dkidm5em.js";import{E as I}from"./DG4vFwbg.js";import{_ as N}from"./BNo7q0CF.js";import"./BO-BUzP0.js";import{E as g}from"./Dtsb2UZl.js";import{f as S,g as q,r as w,J as v,h as B,c as V,b as t,w as l,N as U,o as x,j as y,k as H,d as u,a as f,p as L,e as R}from"./CsIamsOv.js";import{g as p,s as T}from"./Bd0GBrjl.js";import{_ as j}from"./DlAUqK2U.js";import"./DsaM66V6.js";import"./r5W6hzzQ.js";const D=i=>(L("data-v-f1fda822"),i=i(),R(),i),$=D(()=>f("h1",null,"注册",-1)),J=["innerHTML"],z={class:"goHome"},A={class:"goLogin"},G=S({__name:"index",setup(i){const E=q(),d=w(""),m=w(),r=v({username:"",password:"",confirmPassword:"",captcha:""}),b=v({username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{validator:(s,e,o)=>{e===""?o(new Error("密码不能为空")):e.length<6?o(new Error("密码长度不能小于6位")):o()},trigger:"blur"}],confirmPassword:[{required:!0,message:"请再输入一次密码",trigger:"blur"},{validator:(s,e,o)=>{e===""?o(new Error("请再输入一次密码")):e!==r.password?o(new Error("两次输入密码不一致")):o()},trigger:"blur"}],captcha:[{required:!0,message:"请输入验证码",trigger:"blur"},{min:4,max:4,message:"验证码长度为4",trigger:"blur"}]}),h=s=>{s&&s.validate(async e=>{if(e){const o=await T(r.username,r.password,r.confirmPassword,r.captcha),n=o?await o.json():null;n.code===0?(g({message:n.message,type:"success"}),E.push("/login")):g({message:n.message,type:"error"})}else return console.log("error submit!"),!1})},P=s=>{s&&s.resetFields()};return B(async()=>{let s;if(s=await p(),!(s!=null&&s.ok))throw new Error("获取验证码失败");const e=await s.text();d.value=e}),(s,e)=>{const o=M,n=k,c=I,_=N,F=C;return x(),V(U,null,[$,t(F,{ref_key:"ruleFormRef",ref:m,model:r,rules:b,style:{"max-width":"600px",margin:"0 auto"},"label-width":"auto"},{default:l(()=>[t(n,{label:"用户名 :",prop:"username"},{default:l(()=>[t(o,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=a=>r.username=a),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),t(n,{label:"密码 :",prop:"password"},{default:l(()=>[t(o,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=a=>r.password=a),modelModifiers:{trim:!0},type:"password"},null,8,["modelValue"])]),_:1}),t(n,{label:"确认密码 :",prop:"confirmPassword"},{default:l(()=>[t(o,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=a=>r.confirmPassword=a),modelModifiers:{trim:!0},type:"password"},null,8,["modelValue"])]),_:1}),d.value?(x(),V("div",{key:0,innerHTML:d.value,onClick:e[3]||(e[3]=(...a)=>y(p)&&y(p)(...a)),class:"captchaSvg"},null,8,J)):H("",!0),t(n,{label:"验证码 :",prop:"captcha"},{default:l(()=>[t(o,{modelValue:r.captcha,"onUpdate:modelValue":e[4]||(e[4]=a=>r.captcha=a),modelModifiers:{trim:!0},type:"text"},null,8,["modelValue"])]),_:1}),t(n,null,{default:l(()=>[t(c,{type:"primary",onClick:e[5]||(e[5]=a=>h(m.value)),style:{width:"100%"}},{default:l(()=>[u("注册")]),_:1})]),_:1}),t(n,null,{default:l(()=>[t(c,{onClick:e[6]||(e[6]=a=>P(m.value)),style:{width:"100%"}},{default:l(()=>[u("重置")]),_:1})]),_:1}),f("span",z,[t(_,{to:"/"},{default:l(()=>[u("返回首页")]),_:1})]),f("span",A,[u("已有账号? "),t(_,{to:"/login"},{default:l(()=>[u("去登录")]),_:1})])]),_:1},8,["model","rules"])],64)}}}),le=j(G,[["__scopeId","data-v-f1fda822"]]);export{le as default};
